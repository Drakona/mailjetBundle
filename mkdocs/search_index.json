{
    "docs": [
        {
            "location": "/", 
            "text": "Mailjet Bundle\n\n\n\n\n\n\n\n\n\n\n\n\nSymfony bundle for handling Mailjet API V3 using this wrapper: \nhttps://github.com/mailjet/mailjet-apiv3-php\n\n\n\ud83d\udea7 \nWORK IN PROGRESS...\n \ud83d\udea7\n\n\nFeatures\n\n\n\n\n Retrieve \n\\Mailjet\\Client\n to make custom Mailjet API V3 requests\n\n\n \nSwiftMailer Transport integration\n\n\n Synchronize Contact Metadata (Contact Properties) with your config\n\n\n Synchronize your user with Mailjet contact list\n\n\n Use your own userProvider (basic \nFosContactProvider\n included to interface with FosUserBundle)\n\n\n Use lifecycle event to subscribe/unsubscribe/update/delete user from a contact List \n(need more tests)\n\n\n Register Event API - real time notifications (webhook) \n(need more tests)\n\n\n\n\nSetup\n\n\nAdd bundle to your project:\n\n\ncomposer require mailjet/mailjet-bundle\n\n\n\n\n\nAdd \nMailjet\\MailjetBundle\\MailjetBundle\n to your \nAppKernel.php\n:\n\n\n$bundles = [\n\n\n    // ...\n\n\n    new Mailjet\\MailjetBundle\\MailjetBundle(),\n\n\n];\n\n\n\n\n\n\nMinimal Configuration\n\n\nIn your \nconfig.yml\n:\n\n\nmailjet\n:\n\n    \napi_key\n:\n    \n%mailjet.api_key%\n\n    \nsecret_key\n:\n \n%mailjet.secret_key%\n\n\n\n\n\n\nToDo\n\n\n\n\nMore unit tests\n\n\nFunctionnal tests\n\n\nhandle when user changes email\n\n\nBulletproof webhook handler\n\n\nSpecific config for transactionnal client (call, options)\n\n\nOther features like Campaigns, stats, ...\n\n\n\n\nContributing\n\n\nIf you want to contribute to this project, look at \nover here", 
            "title": "Home"
        }, 
        {
            "location": "/#mailjet-bundle", 
            "text": "Symfony bundle for handling Mailjet API V3 using this wrapper:  https://github.com/mailjet/mailjet-apiv3-php  \ud83d\udea7  WORK IN PROGRESS...  \ud83d\udea7", 
            "title": "Mailjet Bundle"
        }, 
        {
            "location": "/#features", 
            "text": "Retrieve  \\Mailjet\\Client  to make custom Mailjet API V3 requests    SwiftMailer Transport integration   Synchronize Contact Metadata (Contact Properties) with your config   Synchronize your user with Mailjet contact list   Use your own userProvider (basic  FosContactProvider  included to interface with FosUserBundle)   Use lifecycle event to subscribe/unsubscribe/update/delete user from a contact List  (need more tests)   Register Event API - real time notifications (webhook)  (need more tests)", 
            "title": "Features"
        }, 
        {
            "location": "/#setup", 
            "text": "Add bundle to your project:  composer require mailjet/mailjet-bundle  Add  Mailjet\\MailjetBundle\\MailjetBundle  to your  AppKernel.php :  $bundles = [      // ...      new Mailjet\\MailjetBundle\\MailjetBundle(),  ];", 
            "title": "Setup"
        }, 
        {
            "location": "/#minimal-configuration", 
            "text": "In your  config.yml :  mailjet : \n     api_key :      %mailjet.api_key% \n     secret_key :   %mailjet.secret_key%", 
            "title": "Minimal Configuration"
        }, 
        {
            "location": "/#todo", 
            "text": "More unit tests  Functionnal tests  handle when user changes email  Bulletproof webhook handler  Specific config for transactionnal client (call, options)  Other features like Campaigns, stats, ...", 
            "title": "ToDo"
        }, 
        {
            "location": "/#contributing", 
            "text": "If you want to contribute to this project, look at  over here", 
            "title": "Contributing"
        }, 
        {
            "location": "/setup/", 
            "text": "Setup\n\n\nAdd bundle to your project:\n\n\ncomposer require mailjet/mailjet-bundle\n\n\n\n\n\nAdd \nMailjet\\MailjetBundle\\MailjetBundle\n to your \nAppKernel.php\n:\n\n\n$bundles = [\n\n\n    // ...\n\n\n    new Mailjet\\MailjetBundle\\MailjetBundle(),\n\n\n];\n\n\n\n\n\n\nMinimal Configuration\n\n\nIn your \nconfig.yml\n:\n\n\nmailjet\n:\n\n    \napi_key\n:\n    \n%mailjet.api_key%\n\n    \nsecret_key\n:\n \n%mailjet.secret_key%\n\n\n\n\n\n\nMore configuration", 
            "title": "Setup"
        }, 
        {
            "location": "/setup/#setup", 
            "text": "Add bundle to your project:  composer require mailjet/mailjet-bundle  Add  Mailjet\\MailjetBundle\\MailjetBundle  to your  AppKernel.php :  $bundles = [      // ...      new Mailjet\\MailjetBundle\\MailjetBundle(),  ];", 
            "title": "Setup"
        }, 
        {
            "location": "/setup/#minimal-configuration", 
            "text": "In your  config.yml :  mailjet : \n     api_key :      %mailjet.api_key% \n     secret_key :   %mailjet.secret_key%   More configuration", 
            "title": "Minimal Configuration"
        }, 
        {
            "location": "/configuration/", 
            "text": "Configuration\n\n\nYou need to have Mailjet account available\n\n\nconfig.yml\n\n\nDefine a configuration in your \nconfig.yml\n:\n\n\nmailjet\n:\n\n    \napi_key\n:\n    \n%mailjet.api_key%\n\n    \nsecret_key\n:\n \n%mailjet.secret_key%\n\n    \ncall\n:\n \ntrue\n \n# Performs the API call or not\n\n    \noptions\n:\n\n        \nurl\n:\n \napi.mailjet.com\n \n# (Default: api.mailjet.com) : domain name of the API\n\n        \nversion\n:\n \nv3\n \n# (Default: v3) : API version (only working for Mailjet API V3 +)\n\n        \ncall\n:\n \ntrue\n \n# (Default: true) : turns on(true) / off the call to the API\n\n        \nsecured\n:\n \ntrue\n \n# secured (Default: true) : turns on(true) / off the use of \nhttps\n\n    \n# route name to handle the callback, if you want to change it\n\n    \nevent_endpoint_route\n:\n \napp_event_endpoint_route\n\n    \n# secret to secure callback\n\n    \nevent_endpoint_token\n:\n \nsecretCode12345678\n\n    \nlists\n:\n\n        \nlistId1\n:\n\n            \n# provider used in full synchronization\n\n            \ncontact_provider\n:\n \nyourapp.provider1\n\n        \nlistId2\n:\n\n            \ncontact_provider\n:\n \nyourapp.provider2\n\n        \n# ...\n\n    \ncontact_metadata\n:\n\n        \n-\n\n            \nname\n:\n \nfirstname\n\n            \ndatatype\n:\n \nstr\n\n        \n-\n\n            \nname\n:\n \nlastname\n\n            \ndatatype\n:\n \nstr\n\n        \n-\n\n            \nname\n:\n \npostalcode\n\n            \ndatatype\n:\n \nint\n\n        \n-\n\n            \nname\n:\n \nrank\n\n            \ndatatype\n:\n \nint\n\n        \n-\n\n            \nname\n:\n \nhasavatar\n\n            \ndatatype\n:\n \nbool\n\n        \n-\n\n            \nname\n:\n \nlastlogin\n\n            \ndatatype\n:\n \ndatetime\n\n        \n-\n\n            \nname\n:\n \ncreatedat\n\n            \ndatatype\n:\n \ndatetime\n\n        \n-\n\n            \nname\n:\n \nbirthdate\n\n            \ndatatype\n:\n \ndatetime\n\n        \n# ...\n\n\n\n\n\n\nWhere \nlistIdX\n is the list id of your Mailjet lists, and \nyourapp.providerX\n is the key of your provider's service that will provide the contacts that need to be synchronized in Mailjet. See the documentation on create \nyour own Contact provider\n.\n\n\nContact Metadata (Contact Properties)\n\n\n\n\nMailjet FAQ\n\n\nMailjet Documentation\n\n\n\n\nYou can find all parameters in Mailjet documentation.\n\n\nExample:\n\n\ncontact_metadata\n:\n\n    \n-\n\n        \nname\n:\n \nfirstname\n\n        \ndatatype\n:\n \nstr\n\n    \n-\n\n        \nname\n:\n \nlastname\n\n        \ndatatype\n:\n \nstr\n\n    \n-\n\n        \nname\n:\n \norganisation\n\n        \ndatatype\n:\n \nstr\n\n    \n-\n\n        \nname\n:\n \ntown\n\n        \ndatatype\n:\n \nstr\n\n    \n-\n\n        \nname\n:\n \npostalcode\n\n        \ndatatype\n:\n \nint\n\n    \n-\n\n        \nname\n:\n \ngender\n\n        \ndatatype\n:\n \nstr\n\n    \n-\n\n        \nname\n:\n \nrank\n\n        \ndatatype\n:\n \nint\n\n    \n-\n\n        \nname\n:\n \nhasavatar\n\n        \ndatatype\n:\n \nbool\n\n    \n-\n\n        \nname\n:\n \nlastlogin\n\n        \ndatatype\n:\n \ndatetime\n\n    \n-\n\n        \nname\n:\n \ncreatedat\n\n        \ndatatype\n:\n \ndatetime\n\n    \n-\n\n        \nname\n:\n \nbirthdate\n\n        \ndatatype\n:\n \ndatetime\n\n\n\n\n\n\nAvailable datatype: \nstr, int, float, bool, datetime", 
            "title": "Configuration"
        }, 
        {
            "location": "/configuration/#configuration", 
            "text": "You need to have Mailjet account available", 
            "title": "Configuration"
        }, 
        {
            "location": "/configuration/#configyml", 
            "text": "Define a configuration in your  config.yml :  mailjet : \n     api_key :      %mailjet.api_key% \n     secret_key :   %mailjet.secret_key% \n     call :   true   # Performs the API call or not \n     options : \n         url :   api.mailjet.com   # (Default: api.mailjet.com) : domain name of the API \n         version :   v3   # (Default: v3) : API version (only working for Mailjet API V3 +) \n         call :   true   # (Default: true) : turns on(true) / off the call to the API \n         secured :   true   # secured (Default: true) : turns on(true) / off the use of  https \n     # route name to handle the callback, if you want to change it \n     event_endpoint_route :   app_event_endpoint_route \n     # secret to secure callback \n     event_endpoint_token :   secretCode12345678 \n     lists : \n         listId1 : \n             # provider used in full synchronization \n             contact_provider :   yourapp.provider1 \n         listId2 : \n             contact_provider :   yourapp.provider2 \n         # ... \n     contact_metadata : \n         - \n             name :   firstname \n             datatype :   str \n         - \n             name :   lastname \n             datatype :   str \n         - \n             name :   postalcode \n             datatype :   int \n         - \n             name :   rank \n             datatype :   int \n         - \n             name :   hasavatar \n             datatype :   bool \n         - \n             name :   lastlogin \n             datatype :   datetime \n         - \n             name :   createdat \n             datatype :   datetime \n         - \n             name :   birthdate \n             datatype :   datetime \n         # ...   Where  listIdX  is the list id of your Mailjet lists, and  yourapp.providerX  is the key of your provider's service that will provide the contacts that need to be synchronized in Mailjet. See the documentation on create  your own Contact provider .", 
            "title": "config.yml"
        }, 
        {
            "location": "/configuration/#contact-metadata-contact-properties", 
            "text": "Mailjet FAQ  Mailjet Documentation   You can find all parameters in Mailjet documentation.  Example:  contact_metadata : \n     - \n         name :   firstname \n         datatype :   str \n     - \n         name :   lastname \n         datatype :   str \n     - \n         name :   organisation \n         datatype :   str \n     - \n         name :   town \n         datatype :   str \n     - \n         name :   postalcode \n         datatype :   int \n     - \n         name :   gender \n         datatype :   str \n     - \n         name :   rank \n         datatype :   int \n     - \n         name :   hasavatar \n         datatype :   bool \n     - \n         name :   lastlogin \n         datatype :   datetime \n     - \n         name :   createdat \n         datatype :   datetime \n     - \n         name :   birthdate \n         datatype :   datetime   Available datatype:  str, int, float, bool, datetime", 
            "title": "Contact Metadata (Contact Properties)"
        }, 
        {
            "location": "/swiftmailer/", 
            "text": "Mailjet SwiftMailer Transport\n\n\nConfiguration\n\n\n    \n# Swiftmailer Configuration\n\n    \nswiftmailer\n:\n\n        \ntransport\n:\n \nmailjet\n\n\n\n\n\n\nDocumentation\n\n\nhere", 
            "title": "SwiftMailer"
        }, 
        {
            "location": "/swiftmailer/#mailjet-swiftmailer-transport", 
            "text": "", 
            "title": "Mailjet SwiftMailer Transport"
        }, 
        {
            "location": "/swiftmailer/#configuration", 
            "text": "# Swiftmailer Configuration \n     swiftmailer : \n         transport :   mailjet", 
            "title": "Configuration"
        }, 
        {
            "location": "/swiftmailer/#documentation", 
            "text": "here", 
            "title": "Documentation"
        }, 
        {
            "location": "/contact-provider/", 
            "text": "Contact Provider\n\n\nAfter \nconfiguring your lists\n in \nconfig.yml\n, you need to create at least one \nProvider\n that will be used by the SyncUser command.\nYour provider should be accessible via a service key (the same you reference in \ncontact_provider\n in your configuration file):\n\n\n    \nservices\n:\n\n        \nyourapp.mailjet.contact_provider1\n:\n\n            \nclass\n:\n \nYourApp\\AppBundle\\Mailjet\\MyContactProvider\n\n            \narguments\n:\n \n[\n@\nyourapp.user.repository\n]\n\n\n\n\n\n\nYou provider class should implement \nMailjet\\MailjetBundle\\Provider\\ProviderInterface\n and the method \ngetContacts\n must return an array of \nMailjet\\MailjetBundle\\Model\\Contact\n objects.\n\n\nExample\n\n\nHere is an example of ContactProvider:\n\n\n?php\n\n\n\nnamespace\n \nYourApp\\App\\Mailjet\n;\n\n\n\nuse\n \nMailjet\\MailjetBundle\\Provider\\ProviderInterface\n;\n\n\nuse\n \nMailjet\\MailjetBundle\\Model\\Contact\n;\n\n\n\nuse\n \nYourApp\\Model\\User\\UserRepository\n;\n\n\nuse\n \nYourApp\\Model\\User\\User\n;\n\n\n\nclass\n \nExampleContactProvider\n \nimplements\n \nProviderInterface\n\n\n{\n\n\n    \nconst\n \nPROP_NICKNAME\n \n=\n           \nnickname\n;\n\n    \nconst\n \nPROP_GENDER\n \n=\n             \ngender\n;\n\n    \nconst\n \nPROP_CITY\n \n=\n               \ncity\n;\n\n    \nconst\n \nPROP_BIRTHDATE\n \n=\n          \nbirthdate\n;\n\n    \nconst\n \nPROP_LAST_ACTIVITY_DATE\n \n=\n \nlast_activity\n;\n\n    \nconst\n \nPROP_REGISTRATION_DATE\n \n=\n  \nregistration_date\n;\n\n\n    \nprotected\n \n$userRepository\n;\n\n\n    \npublic\n \nfunction\n \n__construct\n(\nUserRepository\n \n$userRepository\n)\n\n    \n{\n\n        \n$this\n-\nuserRepository\n \n=\n \n$userRepository\n;\n\n    \n}\n\n\n    \npublic\n \nfunction\n \ngetContacts\n()\n\n    \n{\n\n        \n$users\n \n=\n \n$this\n-\nuserRepository\n-\nfindUsers\n();\n\n\n        \n$contacts\n \n=\n \narray_map\n(\nfunction\n(\nUser\n \n$user\n)\n \n{\n\n            \n$userProperties\n \n=\n \n[\n\n                \nself\n::\nPROP_NICKNAME\n \n=\n \n$user\n-\ngetNickname\n(),\n\n                \nself\n::\nPROP_GENDER\n \n=\n \n$user\n-\ngetGender\n(),\n\n                \nself\n::\nPROP_CITY\n \n=\n \n$user\n-\ngetCity\n(),\n\n                \nself\n::\nPROP_BIRTHDATE\n \n=\n \n$user\n-\ngetBirthday\n()\n \n?\n \n$user\n-\ngetBirthday\n()\n-\nformat\n(\nY-m-d\n)\n \n:\n \n,\n\n                \nself\n::\nPROP_LAST_ACTIVITY_DATE\n \n=\n \n$user\n-\ngetLastActivity\n()\n \n?\n \n$user\n-\ngetLastActivity\n()\n-\nformat\n(\nY-m-d\n)\n \n:\n \n\n                \nself\n::\nPROP_REGISTRATION_DATE\n \n=\n \n$user\n-\ngetRegistrateAt\n()\n \n?\n \n$user\n-\ngetRegistrateAt\n()\n-\nformat\n(\nY-m-d\n)\n \n:\n \n\n            \n];\n\n\n            \n$contact\n \n=\n \nnew\n \nContact\n(\n$user\n-\ngetEmail\n(),\n \n$user\n-\ngetUsername\n(),\n \n$userProperties\n);\n\n\n            \nreturn\n \n$contact\n;\n\n        \n},\n \n$users\n);\n\n\n        \nreturn\n \n$contacts\n;\n\n    \n}\n\n\n}\n\n\n\n\n\n\nFosContactProvider\n\n\nWe also provide a ready to use provider for FosUserBundle: \nFosContactProvider\n. You just need to register the service into your app:\n\n\n    \nservices\n:\n\n        \nyourapp.mailjet.fos_contact_provider\n:\n\n            \nclass\n:\n \nMailjet\\MailjetBundle\\Provider\\FosContactProvider\n\n            \narguments\n:\n \n[\n@\nfos_user.user_manager\n]\n\n\n\n\n\n\nAfter this, don't forget to add the service key for your list into your \nconfig.yml\n:\n\n\n    \n...\n\n    \nlistId1\n:\n\n        \ncontact_provider\n:\n \nyourapp.mailjet.fos_contact_provider\n\n\n\n\n\n\nNote: You need to have \nenabled\n and \nlastlogin\n in your contact properties", 
            "title": "Contact Provider"
        }, 
        {
            "location": "/contact-provider/#contact-provider", 
            "text": "After  configuring your lists  in  config.yml , you need to create at least one  Provider  that will be used by the SyncUser command.\nYour provider should be accessible via a service key (the same you reference in  contact_provider  in your configuration file):       services : \n         yourapp.mailjet.contact_provider1 : \n             class :   YourApp\\AppBundle\\Mailjet\\MyContactProvider \n             arguments :   [ @ yourapp.user.repository ]   You provider class should implement  Mailjet\\MailjetBundle\\Provider\\ProviderInterface  and the method  getContacts  must return an array of  Mailjet\\MailjetBundle\\Model\\Contact  objects.", 
            "title": "Contact Provider"
        }, 
        {
            "location": "/contact-provider/#example", 
            "text": "Here is an example of ContactProvider:  ?php  namespace   YourApp\\App\\Mailjet ;  use   Mailjet\\MailjetBundle\\Provider\\ProviderInterface ;  use   Mailjet\\MailjetBundle\\Model\\Contact ;  use   YourApp\\Model\\User\\UserRepository ;  use   YourApp\\Model\\User\\User ;  class   ExampleContactProvider   implements   ProviderInterface  { \n\n     const   PROP_NICKNAME   =             nickname ; \n     const   PROP_GENDER   =               gender ; \n     const   PROP_CITY   =                 city ; \n     const   PROP_BIRTHDATE   =            birthdate ; \n     const   PROP_LAST_ACTIVITY_DATE   =   last_activity ; \n     const   PROP_REGISTRATION_DATE   =    registration_date ; \n\n     protected   $userRepository ; \n\n     public   function   __construct ( UserRepository   $userRepository ) \n     { \n         $this - userRepository   =   $userRepository ; \n     } \n\n     public   function   getContacts () \n     { \n         $users   =   $this - userRepository - findUsers (); \n\n         $contacts   =   array_map ( function ( User   $user )   { \n             $userProperties   =   [ \n                 self :: PROP_NICKNAME   =   $user - getNickname (), \n                 self :: PROP_GENDER   =   $user - getGender (), \n                 self :: PROP_CITY   =   $user - getCity (), \n                 self :: PROP_BIRTHDATE   =   $user - getBirthday ()   ?   $user - getBirthday () - format ( Y-m-d )   :   , \n                 self :: PROP_LAST_ACTIVITY_DATE   =   $user - getLastActivity ()   ?   $user - getLastActivity () - format ( Y-m-d )   :   \n                 self :: PROP_REGISTRATION_DATE   =   $user - getRegistrateAt ()   ?   $user - getRegistrateAt () - format ( Y-m-d )   :   \n             ]; \n\n             $contact   =   new   Contact ( $user - getEmail (),   $user - getUsername (),   $userProperties ); \n\n             return   $contact ; \n         },   $users ); \n\n         return   $contacts ; \n     }  }", 
            "title": "Example"
        }, 
        {
            "location": "/contact-provider/#foscontactprovider", 
            "text": "We also provide a ready to use provider for FosUserBundle:  FosContactProvider . You just need to register the service into your app:       services : \n         yourapp.mailjet.fos_contact_provider : \n             class :   Mailjet\\MailjetBundle\\Provider\\FosContactProvider \n             arguments :   [ @ fos_user.user_manager ]   After this, don't forget to add the service key for your list into your  config.yml :       ... \n     listId1 : \n         contact_provider :   yourapp.mailjet.fos_contact_provider   Note: You need to have  enabled  and  lastlogin  in your contact properties", 
            "title": "FosContactProvider"
        }, 
        {
            "location": "/usage/", 
            "text": "Usage\n\n\nSynchronize Contact Metadata (Contact Properties)\n\n\nContact Metadata (or Contact Properties) are values you can add to your contacts (for example firstname, birthdate, isenabled, ...).\nYou can use these metadata in your newsletters or to create segments out of them.\n\n\nThis bundle provides a simple way to configure and synchronize these metadata with your Mailjet account.\n\n\nYou just need to configure in your config.yml your \ncontact_metadata\n: \nsee the configuration\n.\n\n\nFinally, you can use this command to synchronize your config with Mailjet:\n\n\nphp app/console mailjet:mailjet:contactmetadata-sync\n\n\n\nFull synchronization with command\n\n\nYou can synchronize all users of your project with a Mailjet list at once by calling the Symfony command:\n\n\nphp app/console mailjet:mailjet:user-sync\n\n\n\nIt will get all your User throught your Contact Provider and will add/update all your User to the configured list.\n\n\nNOTE: you must have configured and created \nyour own contact provider\n.\n\n\nUnit synchronization with events\n\n\nIf you want realtime synchronization, you can dispatch custom events on your controllers/managers (or anywhere). The subscribe event can be used both for adding a new contact or updating an existing one. You can fired these events to trigger sync with Mailjet:\n\n\n    ContactEvent::EVENT_SUBSCRIBE = \nmailjet.mailjet.subscribe\n;\n\n\n    ContactEvent::EVENT_UNSUBSCRIBE = \nmailjet.mailjet.unsubscribe\n;\n\n\n    ContactEvent::EVENT_UPDATE = \nmailjet.mailjet.update\n;\n\n\n    ContactEvent::EVENT_DELETE = \nmailjet.mailjet.delete\n;\n\n\n    // NOT IMPLETENTED YET // ContactEvent::EVENT_CHANGE_EMAIL = \nmailjet.mailjet.change_email\n;\n\n\n\n\n\n\nSubscribe new User\n\n\nHere is an example of a subscribe event dispatch:\n\n\n?php\n\n\n\nuse\n \nMailjet\\MailjetBundle\\Event\\ContactEvent\n;\n\n\nuse\n \nMailjet\\MailjetBundle\\Model\\Contact\n;\n\n\n\n// ...\n\n\n\npublic\n \nfunction\n \nnewUser\n(\nUser\n \n$user\n)\n\n\n{\n\n    \n// ...\n\n\n    \n$contact\n \n=\n \nnew\n \nContact\n(\n$user\n-\ngetEmail\n(),\n \n$user\n-\ngetNickname\n(),\n \n[\n\n        \nfirstname\n \n=\n \n$user\n-\ngetFirstname\n(),\n\n        \nlastname\n \n=\n \n$user\n-\ngetLastname\n(),\n\n        \ncity\n \n=\n \n$user\n-\ngetCity\n(),\n\n        \nlanguage\n \n=\n \nfr\n\n    \n]);\n\n\n    \n$this\n-\ncontainer\n-\nget\n(\nevent_dispatcher\n)\n-\ndispatch\n(\n\n        \nContactEvent\n::\nEVENT_SUBSCRIBE\n,\n\n        \nnew\n \nContactEvent\n(\nyour_list_id\n,\n \n$contact\n)\n\n    \n);\n\n\n}\n\n\n\n\n\n\nUnsubscribe a User\n\n\nUnsubscribe is simpler, you only need the email:\n\n\n?php\n\n\n\nuse\n \nMailjet\\MailjetBundle\\Event\\ContactEvent\n;\n\n\nuse\n \nMailjet\\MailjetBundle\\Model\\Contact\n;\n\n\n\n// ...\n\n\n\npublic\n \nfunction\n \nunsubscribeUser\n(\nUser\n \n$user\n)\n\n\n{\n\n    \n// ...\n\n\n    \n$contact\n \n=\n \nnew\n \nContact\n(\n$user\n-\ngetEmail\n());\n\n\n    \n$this\n-\ncontainer\n-\nget\n(\nevent_dispatcher\n)\n-\ndispatch\n(\n\n        \nContactEvent\n::\nEVENT_UNSUBSCRIBE\n,\n\n        \nnew\n \nContactEvent\n(\nyour_list_id\n,\n \n$contact\n)\n\n    \n);\n\n\n}\n\n\n\n\n\n\nUpdate a User\n\n\nIf your User changes his information, you can sync with MailChimp:\n\n\n?php\n\n\n\nuse\n \nMailjet\\MailjetBundle\\Event\\ContactEvent\n;\n\n\nuse\n \nMailjet\\MailjetBundle\\Model\\Contact\n;\n\n\n\n// ...\n\n\n\npublic\n \nfunction\n \nupdateUser\n(\nUser\n \n$user\n)\n\n\n{\n\n    \n// ...\n\n\n    \n$contact\n \n=\n \nnew\n \nContact\n(\n$user\n-\ngetEmail\n(),\n \n$user\n-\ngetNickname\n(),\n \n[\n\n        \nfirstname\n \n=\n \n$user\n-\ngetFirstname\n(),\n\n        \nlastname\n \n=\n \n$user\n-\ngetLastname\n(),\n\n        \ncity\n \n=\n \n$user\n-\ngetCity\n(),\n\n        \nlanguage\n \n=\n \nfr\n\n    \n]);\n\n\n    \n$this\n-\ncontainer\n-\nget\n(\nevent_dispatcher\n)\n-\ndispatch\n(\n\n        \nContactEvent\n::\nEVENT_UPDATE\n,\n\n        \nnew\n \nContactEvent\n(\nyour_list_id\n,\n \n$contact\n)\n\n    \n);\n\n\n}\n\n\n\n\n\n\nNote: we can't change the address email of a user... MailJet API V3 doesn't permit it so far.\n\n\nDelete a User\n\n\nAnd finally delete a User:\n\n\n?php\n\n\n\nuse\n \nMailjet\\MailjetBundle\\Event\\ContactEvent\n;\n\n\nuse\n \nMailjet\\MailjetBundle\\Model\\Contact\n;\n\n\n\n// ...\n\n\n\npublic\n \nfunction\n \ndeleteUser\n(\nUser\n \n$user\n)\n\n\n{\n\n    \n// ...\n\n\n    \n$contact\n \n=\n \nnew\n \nContact\n(\n$user\n-\ngetEmail\n());\n\n\n    \n$this\n-\ncontainer\n-\nget\n(\nevent_dispatcher\n)\n-\ndispatch\n(\n\n        \nContactEvent\n::\nEVENT_DELETE\n,\n\n        \nnew\n \nContactEvent\n(\nyour_list_id\n,\n \n$contact\n)\n\n    \n);\n\n\n}\n\n\n\n\n\n\nChange User's email address\n\n\nNOT POSSIBLE YET...(WORKAROUND: remove old, add new)\n\n\nRetrieve Mailjet Client Object to make custom MailJet API V3 requests\n\n\nYou can also retrieve the MailJet Client Object which comes from the wrapper \nmailjet/mailjet-apiv3-php\n.\n\n\nThe service key is \nmailjet.client\n.\n\n\nExample:\n\n\n?php\n\n    \nuse\n \n\\Mailjet\\Resources\n;\n\n\n    \n// in any controller action...\n\n    \n...\n\n    \n$mailjet\n \n=\n \n$this\n-\ncontainer\n-\nget\n(\nmailjet.client\n);\n\n\n    \n// Resources are all located in the Resources class\n\n    \n$response\n \n=\n \n$mailjet\n-\nget\n(\nResources\n::\n$Contact\n);\n\n\n    \n/*\n\n\n      Read the response\n\n\n    */\n\n    \nif\n \n(\n$response\n-\nsuccess\n())\n\n      \nvar_dump\n(\n$response\n-\ngetData\n());\n\n    \nelse\n\n      \nvar_dump\n(\n$response\n-\ngetStatus\n());\n\n\n    \n...\n\n    \n// Send transactional emails\n\n\n    \n$body\n \n=\n \n[\n\n        \nFromEmail\n \n=\n \npilot@mailjet.com\n,\n\n        \nFromName\n \n=\n \nMailjet Pilot\n,\n\n        \nSubject\n \n=\n \nYour email flight plan!\n,\n\n        \nText-part\n \n=\n \nDear passenger, welcome to Mailjet! May the delivery force be with you!\n,\n\n        \nHtml-part\n \n=\n \nh3\nDear passenger, welcome to Mailjet!\n/h3\nbr /\nMay the delivery force be with you!\n,\n\n        \nRecipients\n \n=\n \n[[\nEmail\n \n=\n \npassenger@mailjet.com\n]]\n\n    \n];\n\n\n    \n$response\n \n=\n \n$mailjet\n-\npost\n(\nResources\n::\n$Email\n,\n \n[\nbody\n \n=\n \n$body\n]);", 
            "title": "Usage"
        }, 
        {
            "location": "/usage/#usage", 
            "text": "", 
            "title": "Usage"
        }, 
        {
            "location": "/usage/#synchronize-contact-metadata-contact-properties", 
            "text": "Contact Metadata (or Contact Properties) are values you can add to your contacts (for example firstname, birthdate, isenabled, ...).\nYou can use these metadata in your newsletters or to create segments out of them.  This bundle provides a simple way to configure and synchronize these metadata with your Mailjet account.  You just need to configure in your config.yml your  contact_metadata :  see the configuration .  Finally, you can use this command to synchronize your config with Mailjet:  php app/console mailjet:mailjet:contactmetadata-sync", 
            "title": "Synchronize Contact Metadata (Contact Properties)"
        }, 
        {
            "location": "/usage/#full-synchronization-with-command", 
            "text": "You can synchronize all users of your project with a Mailjet list at once by calling the Symfony command:  php app/console mailjet:mailjet:user-sync  It will get all your User throught your Contact Provider and will add/update all your User to the configured list.  NOTE: you must have configured and created  your own contact provider .", 
            "title": "Full synchronization with command"
        }, 
        {
            "location": "/usage/#unit-synchronization-with-events", 
            "text": "If you want realtime synchronization, you can dispatch custom events on your controllers/managers (or anywhere). The subscribe event can be used both for adding a new contact or updating an existing one. You can fired these events to trigger sync with Mailjet:      ContactEvent::EVENT_SUBSCRIBE =  mailjet.mailjet.subscribe ;      ContactEvent::EVENT_UNSUBSCRIBE =  mailjet.mailjet.unsubscribe ;      ContactEvent::EVENT_UPDATE =  mailjet.mailjet.update ;      ContactEvent::EVENT_DELETE =  mailjet.mailjet.delete ;      // NOT IMPLETENTED YET // ContactEvent::EVENT_CHANGE_EMAIL =  mailjet.mailjet.change_email ;", 
            "title": "Unit synchronization with events"
        }, 
        {
            "location": "/usage/#subscribe-new-user", 
            "text": "Here is an example of a subscribe event dispatch:  ?php  use   Mailjet\\MailjetBundle\\Event\\ContactEvent ;  use   Mailjet\\MailjetBundle\\Model\\Contact ;  // ...  public   function   newUser ( User   $user )  { \n     // ... \n\n     $contact   =   new   Contact ( $user - getEmail (),   $user - getNickname (),   [ \n         firstname   =   $user - getFirstname (), \n         lastname   =   $user - getLastname (), \n         city   =   $user - getCity (), \n         language   =   fr \n     ]); \n\n     $this - container - get ( event_dispatcher ) - dispatch ( \n         ContactEvent :: EVENT_SUBSCRIBE , \n         new   ContactEvent ( your_list_id ,   $contact ) \n     );  }", 
            "title": "Subscribe new User"
        }, 
        {
            "location": "/usage/#unsubscribe-a-user", 
            "text": "Unsubscribe is simpler, you only need the email:  ?php  use   Mailjet\\MailjetBundle\\Event\\ContactEvent ;  use   Mailjet\\MailjetBundle\\Model\\Contact ;  // ...  public   function   unsubscribeUser ( User   $user )  { \n     // ... \n\n     $contact   =   new   Contact ( $user - getEmail ()); \n\n     $this - container - get ( event_dispatcher ) - dispatch ( \n         ContactEvent :: EVENT_UNSUBSCRIBE , \n         new   ContactEvent ( your_list_id ,   $contact ) \n     );  }", 
            "title": "Unsubscribe a User"
        }, 
        {
            "location": "/usage/#update-a-user", 
            "text": "If your User changes his information, you can sync with MailChimp:  ?php  use   Mailjet\\MailjetBundle\\Event\\ContactEvent ;  use   Mailjet\\MailjetBundle\\Model\\Contact ;  // ...  public   function   updateUser ( User   $user )  { \n     // ... \n\n     $contact   =   new   Contact ( $user - getEmail (),   $user - getNickname (),   [ \n         firstname   =   $user - getFirstname (), \n         lastname   =   $user - getLastname (), \n         city   =   $user - getCity (), \n         language   =   fr \n     ]); \n\n     $this - container - get ( event_dispatcher ) - dispatch ( \n         ContactEvent :: EVENT_UPDATE , \n         new   ContactEvent ( your_list_id ,   $contact ) \n     );  }   Note: we can't change the address email of a user... MailJet API V3 doesn't permit it so far.", 
            "title": "Update a User"
        }, 
        {
            "location": "/usage/#delete-a-user", 
            "text": "And finally delete a User:  ?php  use   Mailjet\\MailjetBundle\\Event\\ContactEvent ;  use   Mailjet\\MailjetBundle\\Model\\Contact ;  // ...  public   function   deleteUser ( User   $user )  { \n     // ... \n\n     $contact   =   new   Contact ( $user - getEmail ()); \n\n     $this - container - get ( event_dispatcher ) - dispatch ( \n         ContactEvent :: EVENT_DELETE , \n         new   ContactEvent ( your_list_id ,   $contact ) \n     );  }", 
            "title": "Delete a User"
        }, 
        {
            "location": "/usage/#change-users-email-address", 
            "text": "NOT POSSIBLE YET...(WORKAROUND: remove old, add new)", 
            "title": "Change User's email address"
        }, 
        {
            "location": "/usage/#retrieve-mailjet-client-object-to-make-custom-mailjet-api-v3-requests", 
            "text": "You can also retrieve the MailJet Client Object which comes from the wrapper  mailjet/mailjet-apiv3-php .  The service key is  mailjet.client .  Example:  ?php \n     use   \\Mailjet\\Resources ; \n\n     // in any controller action... \n     ... \n     $mailjet   =   $this - container - get ( mailjet.client ); \n\n     // Resources are all located in the Resources class \n     $response   =   $mailjet - get ( Resources :: $Contact ); \n\n     /*        Read the response      */ \n     if   ( $response - success ()) \n       var_dump ( $response - getData ()); \n     else \n       var_dump ( $response - getStatus ()); \n\n     ... \n     // Send transactional emails \n\n     $body   =   [ \n         FromEmail   =   pilot@mailjet.com , \n         FromName   =   Mailjet Pilot , \n         Subject   =   Your email flight plan! , \n         Text-part   =   Dear passenger, welcome to Mailjet! May the delivery force be with you! , \n         Html-part   =   h3 Dear passenger, welcome to Mailjet! /h3 br / May the delivery force be with you! , \n         Recipients   =   [[ Email   =   passenger@mailjet.com ]] \n     ]; \n\n     $response   =   $mailjet - post ( Resources :: $Email ,   [ body   =   $body ]);", 
            "title": "Retrieve Mailjet Client Object to make custom MailJet API V3 requests"
        }, 
        {
            "location": "/event-api/", 
            "text": "Event API: real-time notifications (webhook)\n\n\nhttps://dev.mailjet.com/guides/#event-api-real-time-notifications\n\n\n\ud83d\udea7 \nWORK IN PROGRESS...\n \ud83d\udea7", 
            "title": "Event API (webhook)"
        }, 
        {
            "location": "/event-api/#event-api-real-time-notifications-webhook", 
            "text": "https://dev.mailjet.com/guides/#event-api-real-time-notifications  \ud83d\udea7  WORK IN PROGRESS...  \ud83d\udea7", 
            "title": "Event API: real-time notifications (webhook)"
        }, 
        {
            "location": "/symfony-debug-toolbar/", 
            "text": "Symfony debug toolbar\n\n\nWhen Mailjet API is call, you can find Request data in Symfony debug toolbar.\n\n\n\n\nWhen you click on Mailjet icon on toolbar, you can have debug data on Mailjet API calls executed.\n\n\n\n\nIt's a powerfull built-in tool you can use without moderation!", 
            "title": "Symfony Debug Toolbar"
        }, 
        {
            "location": "/symfony-debug-toolbar/#symfony-debug-toolbar", 
            "text": "When Mailjet API is call, you can find Request data in Symfony debug toolbar.   When you click on Mailjet icon on toolbar, you can have debug data on Mailjet API calls executed.   It's a powerfull built-in tool you can use without moderation!", 
            "title": "Symfony debug toolbar"
        }, 
        {
            "location": "/tests/", 
            "text": "Tests\n\n\n\n\nhttp://www.phpspec.net/\n\n\n\n\nUnit tests\n\n\nbin/phpspec run --fpretty --verbose\n\n\n\nEvents(Webhook) tests\n\n\nuse ngrok and \nhttp://requestb.in/\n\n\nDebug/dev mode\n\n\nThe best solution to debug or dev environment is to create a new MailJet account and use the API key of this new \"debug/dev\" Mailjet account.", 
            "title": "Tests"
        }, 
        {
            "location": "/tests/#tests", 
            "text": "http://www.phpspec.net/", 
            "title": "Tests"
        }, 
        {
            "location": "/tests/#unit-tests", 
            "text": "bin/phpspec run --fpretty --verbose", 
            "title": "Unit tests"
        }, 
        {
            "location": "/tests/#eventswebhook-tests", 
            "text": "use ngrok and  http://requestb.in/", 
            "title": "Events(Webhook) tests"
        }, 
        {
            "location": "/tests/#debugdev-mode", 
            "text": "The best solution to debug or dev environment is to create a new MailJet account and use the API key of this new \"debug/dev\" Mailjet account.", 
            "title": "Debug/dev mode"
        }, 
        {
            "location": "/build-documentation/", 
            "text": "Build documentation\n\n\nYou can read files in the folder \nsrc/Resources/doc\n or you can compile the documentation with MkDocs.\n\n\nMkDocs\n\n\n\n\nInstall Python 2.7 and Pip 1.5\n\n\nInstall MkDocs: \npip install mkdocs\n\n\nInstall pymdown-extension: \npip install pymdown-extensions\n\n\nCompile the doc: \nmkdocs build\n\n\nPreview the doc: \nmkdocs serve\n at \nhttp://127.0.0.1:8000\n\n\n\n\nDeploy to gh-pages\n\n\nDocumentation is deployed here: \nhttps://mailjet.github.io/mailjetBundle/\n\n\nIn order to deploy a new version of documentation: \nmkdocs gh-deploy", 
            "title": "Build Documentation"
        }, 
        {
            "location": "/build-documentation/#build-documentation", 
            "text": "You can read files in the folder  src/Resources/doc  or you can compile the documentation with MkDocs.", 
            "title": "Build documentation"
        }, 
        {
            "location": "/build-documentation/#mkdocs", 
            "text": "Install Python 2.7 and Pip 1.5  Install MkDocs:  pip install mkdocs  Install pymdown-extension:  pip install pymdown-extensions  Compile the doc:  mkdocs build  Preview the doc:  mkdocs serve  at  http://127.0.0.1:8000", 
            "title": "MkDocs"
        }, 
        {
            "location": "/build-documentation/#deploy-to-gh-pages", 
            "text": "Documentation is deployed here:  https://mailjet.github.io/mailjetBundle/  In order to deploy a new version of documentation:  mkdocs gh-deploy", 
            "title": "Deploy to gh-pages"
        }, 
        {
            "location": "/mailjet-doc/", 
            "text": "Mailjet Documentation\n\n\n\n\nAPI Guides\n\n\nAPI Reference\n\n\nSwitch from Mandrill\n\n\nAutomation (FR)", 
            "title": "Mailjet Doc"
        }, 
        {
            "location": "/mailjet-doc/#mailjet-documentation", 
            "text": "API Guides  API Reference  Switch from Mandrill  Automation (FR)", 
            "title": "Mailjet Documentation"
        }, 
        {
            "location": "/CONTRIBUTING/", 
            "text": "CONTRIBUTING\n\n\n\n\nContributing to Open Source guide\n\n\n\n\nSteps\n\n\n\n\nCreate an Issue\n\n\nPull Request\n\n\nMerge \\o/\n\n\n\n\nContributors\n\n\n\n\nOriginal author: \nTitouan BENOIT\n\n\nMailjet API", 
            "title": "Contributing"
        }, 
        {
            "location": "/CONTRIBUTING/#contributing", 
            "text": "Contributing to Open Source guide", 
            "title": "CONTRIBUTING"
        }, 
        {
            "location": "/CONTRIBUTING/#steps", 
            "text": "Create an Issue  Pull Request  Merge \\o/", 
            "title": "Steps"
        }, 
        {
            "location": "/CONTRIBUTING/#contributors", 
            "text": "Original author:  Titouan BENOIT  Mailjet API", 
            "title": "Contributors"
        }
    ]
}